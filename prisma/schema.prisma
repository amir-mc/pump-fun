// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
model Token {
  mintAddress          String   @id @unique
  name                 String
  symbol               String
  bondingCurve         String   @unique
  creator              String
  signature            String
  timestamp            DateTime
  Tokenprice           String
  totalSupply          BigInt
  complete             Boolean
  virtualTokenReserves BigInt
  virtualSolReserves   BigInt
  realTokenReserves    BigInt
  realSolReserves      BigInt
  createdAt            DateTime @default(now())

    signatures     BondingCurveSignature[] @relation("TokenSignatures")
}

model BondingCurveSignature {
  id                  Int      @id @default(autoincrement())
  signature           String   @unique
  curveAddress        String
  slot                BigInt
  blockTime           Int?
  confirmationStatus  String
  error               String?
  memo                String?
  virtualTokenReserves BigInt
  virtualSolReserves  BigInt
  realTokenReserves   BigInt
  realSolReserves     BigInt
  tokenTotalSupply    BigInt
  complete            Boolean
  creator             String?
  preTokenAmount      BigInt?   // مقدار قبل از تراکنش (توکن)
  postTokenAmount     BigInt?   // مقدار بعد از تراکنش (توکن)
  tokenDiff           BigInt?   // اختلاف (post - pre)

  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  token Token? @relation("TokenSignatures", fields: [curveAddress], references: [bondingCurve])
}

